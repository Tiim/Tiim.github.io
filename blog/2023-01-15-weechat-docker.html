<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/swim-emoji.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="tiim.ch Â» Tim Bachmann"
      href="/blog/rss.xml"
    />
    <link href="https://comments.tiim.ch/wm/webmentions" rel="webmention" />
    <link
      href="https://comments.tiim.ch/indieauth/metadata"
      rel="indieauth-metadata"
    />
    <link
      href="https://comments.tiim.ch/indieauth/authorize"
      rel="authorization_endpoint"
    />
    <link
      href="https://comments.tiim.ch/indieauth/token"
      rel="token_endpoint"
    />
    <link rel="micropub" href="https://comments.tiim.ch/micropub" />
    <link rel="microsub" href="https://aperture.p3k.io/microsub/801" />
    <title>Tim Bachmann</title>
    
		<link href="../_app/immutable/assets/0.8d503a92.css" rel="stylesheet">
		<link href="../_app/immutable/assets/4.32b0d823.css" rel="stylesheet">
		<link href="../_app/immutable/assets/MarkdownSite.52351ed7.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.5c58580c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.8c1dbec0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.195a5806.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/paths.ee001647.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.8dd63c07.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.9334d053.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/mf2.47734ed4.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.657d6c5d.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/MarkdownSite.88130736.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/fa.9f83fec8.js"><title>Running the WeeChat IRC Client on a VPS in Docker - Tim Bachmann</title><!-- HEAD_svelte-1ula76m_START --><meta property="og:title" content="Running the WeeChat IRC Client on a VPS in Docker"><meta property="og:type" content="article"><meta property="og:description" content="Walkthrough on how to setup the WeeChat IRC client in docker."><meta property="article:published_time" content="Sun Jan 15 2023 00:00:00 GMT+0000 (Coordinated Universal Time)"><meta property="article:modified_time" content="Wed Jan 18 2023 11:34:27 GMT+0000 (Coordinated Universal Time)"><meta property="article:author" content="Tim Bachmann"><meta property="article:tag" content="docker"><meta property="article:tag" content="irc"><meta property="article:tag" content="weechat"><meta property="og:image" content="https://media.tiim.ch/a28c65a1-ed95-43d3-af87-a2ad222bee7f.jpg"><!-- HEAD_svelte-1ula76m_END -->
  </head>
  <body>
    <div id="svelte">


<div id="app"><nav class="navbar svelte-1qkwc1i" aria-label="main navigation"><div class="navbar-brand svelte-1qkwc1i"><a class="navbar-item svelte-1qkwc1i" href="/">Tim Bachmann</a></div>
  <div class="navbar-menu desktop svelte-1qkwc1i"><a href="/" class="navbar-item svelte-1qkwc1i">Home</a>
    <a href="/projects" class="navbar-item svelte-1qkwc1i">Projects</a>
    <a href="/blog" class="navbar-item svelte-1qkwc1i">Blog</a>
    <a href="/pages/uses" class="navbar-item svelte-1qkwc1i">Uses</a>
    <a class="navbar-item svelte-1qkwc1i" href="/contact">Contact</a>
    <a class="navbar-item svelte-1qkwc1i" href="/follow">Follow</a></div>
  <div class="navbar-menu mobile svelte-1qkwc1i"><div><input id="header-toggle" class="header-checkbox svelte-1qkwc1i" type="checkbox">
      <label for="header-toggle" class="toggle svelte-1qkwc1i"><span class="svelte-1qkwc1i"></span>
        <span class="svelte-1qkwc1i"></span>
        <span class="svelte-1qkwc1i"></span></label></div>
    </div>
</nav>
  <div class="section">

<div><article class="container h-entry"><figure class="svelte-1vgyhou"><img alt="Running the WeeChat IRC Client on a VPS in Docker" src="https://media.tiim.ch/a28c65a1-ed95-43d3-af87-a2ad222bee7f.jpg" class="svelte-1vgyhou">
        <figcaption class="svelte-1vgyhou">Stable Diffusion - anime landscape, pastel colors, thick outlines, forest, mountains, golden light</figcaption></figure>

    <h1><span class="p-name">Running the WeeChat IRC Client on a VPS in Docker</span></h1>
    

    <p class="tags"><a class="tag p-category" href="/tags/docker">docker
        </a><a class="tag p-category" href="/tags/irc">irc
        </a><a class="tag p-category" href="/tags/weechat">weechat
        </a></p>

    <div class="by svelte-1vgyhou"><address class="author svelte-1vgyhou">by <a href="/" rel="author">Tim Bachmann</a></address>
      <span>published on <time pubdate datetime="2023-01-15T00:00:00.000Z" class="date dt-published">Sunday, January 15, 2023</time></span>
last updated on <time pubdate datetime="2023-01-18T11:34:27.000Z" class="date dt-updated">Wednesday, January 18, 2023</time></div>

    
    <div class="e-content content svelte-1vgyhou"><!-- HTML_TAG_START --><p>I have recently gotten interested in IRC for some reason and have been looking for a client that I like. I have used <a href="https://hexchat.github.io/" rel="nofollow noopener noreferrer">HexChat</a> in the past, but I don't really fancy having yet another communications program running on my PC next to discord, zoom, telegram and thunderbird. I have been trying to use the IRC feature of thunderbird, but even though it works, it feels very much like an afterthought.</p>
<p>The one client I have seen mentioned a lot is <a href="https://weechat.org/" rel="nofollow noopener noreferrer">WeeChat</a> (not to be confused with WeChat, the Chinese instant messenger). WeeChat runs in the terminal as a <a href="https://en.wikipedia.org/wiki/Text-based_user_interface" rel="nofollow noopener noreferrer">TUI</a> and after a while of getting used to (and after enabling 'mouse mode') it seems intuitive enough.</p>
<p>The nice thing about WeeChat running not as a graphical application, is that it makes it possible to run on a server and access it from anywhere over ssh.</p>
<blockquote class="callout callout-info">
<span class="callout-title"><span class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg></span>INFO</span><p>Except on mobile devices, but weechat has mobile apps that can connect to it directly.</p>
</blockquote>
<p>Since I pretty much host all my selfhosted software in docker on a VPS, I was looking if someone already published a docker image for WeeChat. There is a bunch of them, but only <a href="https://hub.docker.com/r/weechat/weechat" rel="nofollow noopener noreferrer">weechat/weechat</a> (the official image) is still updated regularly. The docker hub page does not have any documentation, but I managed to find it in the <a href="https://github.com/weechat/weechat-container" rel="nofollow noopener noreferrer">weechat/weechat-container</a> github repo.</p>
<p>As it says in the readme on github, you can start the container with</p>
<pre><code class="language-sh">docker run -it weechat/weechat
</code></pre>
<p>which will run weechat directly in the foreground.</p>
<blockquote class="callout callout-info">
<span class="callout-title"><span class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg></span>Info</span><p>Don't skip the <code>-it</code> command line flags. The <code>-i</code> or <code>--interactive</code> keeps stdin open, which is required to send input to weechat. Weechat also closes immediately if the stdin gets closed, which took me a while to figure out.
The <code>-t</code> or <code>--tty</code> flag is required to provide a fake tty to the container. I don't really understand what that means but without this you won't see the user interface of weechat.</p>
</blockquote>
<p>Running in the foreground is not really that helpful if we want to run weechat on a server, so we need to detach (let it run in the background) from the container with the <code>-d</code> or <code>--detach</code> flag. It also helps to specify a name for the container with the <code>--name &#x3C;name></code> argument, so we can quickly find the container again later. The docker command now looks like this:</p>
<pre><code class="language-sh">docker run -it -d --name weechat weechat/weechat
</code></pre>
<p>When we run this command, we will notice that weechat is running in the background. To access it we can run <code>docker attach weechat</code>. To detach from weechat without exiting the container, we can press <code>CTRL-p CTRL-q</code> as described in the <a href="https://docs.docker.com/engine/reference/commandline/attach/#description" rel="nofollow noopener noreferrer">docker attach reference</a></p>
<p>I noticed that there are two versions of the weechat image: a debian version and an alpine linux version. Generally the Alpine Linux versions of containers are smaller than the Debian versions, so I decided to use the alpine version: <code>weechat/weechat:latest-alpine</code>.</p>
<p>With this we are practically done, but if we ever remove and restart the container, all of the chat logs and customisations to weechat will be gone. To prevent this we need to add the config and log files to a volume.</p>
<p>I generally use the folder <code>~/docker/(service)</code> to point my docker volumes to, so I have a convenient place to inspect, modify and back up the data.</p>
<p>Let's create the folder and add the volume to the docker container. I also added the <code>--restart unless-stopped</code> flag to make sure the container gets restarted if it either exits for some reason of if docker restarts.</p>
<pre><code class="language-sh">mkdir -p ~/docker/weechat/data
mkdir -p ~/docker/weechat/config

docker run -it -d --restart unless-stopped \
    -v "~/docker/weechat/data:/home/user/.weechat" \
    -v "~/docker/weechat/config:/home/user/.config/weechat" \
    --name weechat weechat/weechat:latest-alpine`
</code></pre>
<p>Running this command on the server is all we need to have weechat running in docker.</p>
<blockquote>
<p>But how do I quickly connect to weechat? Do I always have to first ssh into the server and then run docker attach?</p>
</blockquote>
<p>Yes but, as almost always, we can simplify this with a bash script:</p>
<pre><code class="language-bash">#!/usr/bin/env bash

HOST=&#x3C;ssh host>
ssh -t "${HOST}" docker attach weechat
</code></pre>
<p>This bash script starts ssh with the <code>-t</code> flag which tells ssh that the command is interactive.
Copy this script into your <code>~/.local/bin</code> folder and make it executable.</p>
<pre><code class="language-sh">nano ~/.local/bin/weechat.sh
chmod +x weechat.sh
</code></pre>
<p>And that's it! Running <code>weechat.sh</code> will open an ssh session to your server and attach to the weechat container. Happy Chatting!</p>
<p>If you liked this post, consider subscribing to my blog via <a href="https://tiim.ch/blog/rss.xml" rel="nofollow noopener noreferrer">RSS</a>, or on <a href="https://tiim.ch/follow" rel="nofollow noopener noreferrer">social media</a>. If you have any questions, feel free to <a href="https://tiim.ch/contact" rel="nofollow noopener noreferrer">contact me</a>. I also usually hang out in <a href="irc://irc.libera.chat/##tiim"><code>##tiim</code> on irc.libera.chat</a>. My name on IRC is <code>tiim</code>.</p>
<blockquote class="callout callout-info">
<span class="callout-title"><span class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg></span>Update 2022-01-18</span><p>I have found that at the beginning of a session, the input to weechat doesn't seem to work. Sometimes weechat refuses to let me type anything and/or doesn't recognize mouse events.
After a while of spamming keys and <code>Alt-m</code> (toggle mouse mode), it seems to fix itself most of the time.
I have no idea if thats a problem with weechat, with docker or with ssh, and so far have not found a solution for this. If you have the same problem or even know how to fix it, feel free to reach out.</p>
</blockquote><!-- HTML_TAG_END --></div>

    

    <div class="outro svelte-1ysgxol" slot="outro"><em>You found an error in this post? Open a
      <a href="https://github.com/Tiim/Tiim.github.io/tree/source/content/blog/2023-01-15-weechat-docker.md">pull request</a>.
    </em></div>

    <div class="author-info p-author h-card svelte-gqjfyc"><div class="author-avatar svelte-gqjfyc"><img src="https://media.tiim.ch/tiim.jpg" alt="Photo of Tim Bachmann" class="u-photo svelte-gqjfyc"></div>
  <div><p class="author-bio p-note"><!-- HTML_TAG_START --><p>Hi, my name is <span class="p-name">Tim Bachmann</span>!
I'm a <span class="p-role">master graduate in computer science</span> at <span class="p-org">University of Basel</span>, swimmer and swim coach.</p>
<p>I am passionate about all things web development, swimming, personal knowledge management and much more.
If you liked this or any of my posts, feel free to <a href="https://tiim.ch/follow" rel="nofollow noopener noreferrer">follow me</a>.</p><!-- HTML_TAG_END --></p>
    <div class="author-detail svelte-gqjfyc"><span class="hidden p-gender-identity svelte-gqjfyc">male</span>
      <a href="mailto:hey@tiim.ch" class="p-email">hey@tiim.ch</a>
      <a class="p-url" href="https://tiim.ch/">https://tiim.ch/</a></div></div>
</div>

    <div class="post-details"><p class="hidden p-summary svelte-1vgyhou">Walkthrough on how to setup the WeeChat IRC client in docker.</p>
      <a class="hidden p-url p-uid svelte-1vgyhou" href="/blog/2023-01-15-weechat-docker">/blog/2023-01-15-weechat-docker</a></div></article>
  <div class="container"><h2 class="svelte-z0478z">4 Comments and Interactions</h2>
<span>Leave a comment or interact with this page via
  <a href="http://indieweb.org/webmention">WebMention </a></span>
<div class="comment-form-wrap"><div id="comment-section" class="comment-input svelte-1xby3i5"><span class="avatar svelte-1xby3i5">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
    <div class="comment-input-content svelte-1xby3i5"><label for="comment-input-name">Name</label>
      <input id="commentName" type="text" placeholder="Name">
      <div class="comment-input-content svelte-1xby3i5"><label for="comment-input-email">E-mail</label>
        <div class="horizontal svelte-1xby3i5"><input id="commentEmail" type="email" placeholder="Email (optional)">
          <div class="checkbox svelte-1xby3i5"><input type="checkbox" id="comment-input-notify" class="svelte-1xby3i5">
            <label for="comment-input-notify">Notify me on replies</label></div></div></div>
      
      <label for="commentContent">Comment</label>
      <textarea id="commentContent" placeholder="Comment" class="svelte-1xby3i5"></textarea>
      <button>Post</button>
      </div></div>
</div>
<ul class="comment-list svelte-z0478z"><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="52b7b3e6-e233-4379-8f0c-3332aed562a6" class="svelte-z0478z">Tim Bachmann</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2023-03-28-weechat-notification-ntfy">2023-03-28 10:10:56 AM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z">Using the weechat trigger plugin to notify yourself about new private messages and mentions through the ntfy.sh notification service.</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="f6f58ebf-a68f-415e-baed-cb8bf38189fd" class="svelte-z0478z">DM Cyber Security</h3>
          <span class="time svelte-z0478z"><a href="https://brid.gy/like/twitter/tiimb/1614403118258601987/1557313575072546816">2023-03-02 12:05:49 AM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z"></p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="45d40e9f-6498-4432-bdb0-01210e55d092" class="svelte-z0478z">Christopher Scott</h3>
          <span class="time svelte-z0478z"><a href="https://brid.gy/like/twitter/tiimb/1614403118258601987/8717982">2023-01-25 6:20:43 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z"></p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="979c42d0-a8fc-4a52-a85d-bedb672fb144" class="svelte-z0478z">WeeChat</h3>
          <span class="time svelte-z0478z"><a href="https://brid.gy/repost/twitter/tiimb/1614403118258601987/1618133427139792898">2023-01-25 9:22:51 AM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z">New blog post: A walkthrough on how to set up the WeeChat IRC client in docker. #irc #docker @WeeChatClient
tiim.ch/blog/2023-01-1â¦</p></div>
    </li>
</ul></div>
</div></div>
  <div><footer class="svelte-18j7aqw"><div><!-- HTML_TAG_START --><p>Built with SvelteKit and hosted on GitHub Pages.</p>
<p>View this website on <a href="https://github.com/Tiim/Tiim.github.io" rel="nofollow noopener noreferrer">GitHub</a>!</p>
<h2>Other pages</h2>
<ul>
<li><a href="https://tiim.ch/pages/links" rel="nofollow noopener noreferrer">Links and Blogroll</a></li>
</ul><!-- HTML_TAG_END --></div>
  <p class="copyright svelte-18j7aqw">Â©Tim Bachmann 2024</p>
</footer></div></div>


			
			<script>
				{
					__sveltekit_h39q7n = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{footer:{html:"\u003Cp>Built with SvelteKit and hosted on GitHub Pages.\u003C/p>\n\u003Cp>View this website on \u003Ca href=\"https://github.com/Tiim/Tiim.github.io\" rel=\"nofollow noopener noreferrer\">GitHub\u003C/a>!\u003C/p>\n\u003Ch2>Other pages\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://tiim.ch/pages/links\" rel=\"nofollow noopener noreferrer\">Links and Blogroll\u003C/a>\u003C/li>\n\u003C/ul>",slug:"footer",uuid:"e556fd14-3acd-4a7b-9b31-929fdd6d2b7a",created:new Date(1690834579000),date:new Date(1690834579000),published:true,abstract:"\u003Cp>Built with SvelteKit and hosted on GitHub Pages.\u003C/p>",tags:[],links:void 0,type:"article",cover_image:void 0,description:"",folder:"metadata"}},"uses":{}},{"type":"data","data":{post:{html:"\u003Cp>I have recently gotten interested in IRC for some reason and have been looking for a client that I like. I have used \u003Ca href=\"https://hexchat.github.io/\" rel=\"nofollow noopener noreferrer\">HexChat\u003C/a> in the past, but I don't really fancy having yet another communications program running on my PC next to discord, zoom, telegram and thunderbird. I have been trying to use the IRC feature of thunderbird, but even though it works, it feels very much like an afterthought.\u003C/p>\n\u003Cp>The one client I have seen mentioned a lot is \u003Ca href=\"https://weechat.org/\" rel=\"nofollow noopener noreferrer\">WeeChat\u003C/a> (not to be confused with WeChat, the Chinese instant messenger). WeeChat runs in the terminal as a \u003Ca href=\"https://en.wikipedia.org/wiki/Text-based_user_interface\" rel=\"nofollow noopener noreferrer\">TUI\u003C/a> and after a while of getting used to (and after enabling 'mouse mode') it seems intuitive enough.\u003C/p>\n\u003Cp>The nice thing about WeeChat running not as a graphical application, is that it makes it possible to run on a server and access it from anywhere over ssh.\u003C/p>\n\u003Cblockquote class=\"callout callout-info\">\n\u003Cspan class=\"callout-title\">\u003Cspan class=\"callout-icon\">\u003Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\u003Cpath d=\"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\">\u003C/path>\u003C/svg>\u003C/span>INFO\u003C/span>\u003Cp>Except on mobile devices, but weechat has mobile apps that can connect to it directly.\u003C/p>\n\u003C/blockquote>\n\u003Cp>Since I pretty much host all my selfhosted software in docker on a VPS, I was looking if someone already published a docker image for WeeChat. There is a bunch of them, but only \u003Ca href=\"https://hub.docker.com/r/weechat/weechat\" rel=\"nofollow noopener noreferrer\">weechat/weechat\u003C/a> (the official image) is still updated regularly. The docker hub page does not have any documentation, but I managed to find it in the \u003Ca href=\"https://github.com/weechat/weechat-container\" rel=\"nofollow noopener noreferrer\">weechat/weechat-container\u003C/a> github repo.\u003C/p>\n\u003Cp>As it says in the readme on github, you can start the container with\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">docker run -it weechat/weechat\n\u003C/code>\u003C/pre>\n\u003Cp>which will run weechat directly in the foreground.\u003C/p>\n\u003Cblockquote class=\"callout callout-info\">\n\u003Cspan class=\"callout-title\">\u003Cspan class=\"callout-icon\">\u003Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\u003Cpath d=\"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\">\u003C/path>\u003C/svg>\u003C/span>Info\u003C/span>\u003Cp>Don't skip the \u003Ccode>-it\u003C/code> command line flags. The \u003Ccode>-i\u003C/code> or \u003Ccode>--interactive\u003C/code> keeps stdin open, which is required to send input to weechat. Weechat also closes immediately if the stdin gets closed, which took me a while to figure out.\nThe \u003Ccode>-t\u003C/code> or \u003Ccode>--tty\u003C/code> flag is required to provide a fake tty to the container. I don't really understand what that means but without this you won't see the user interface of weechat.\u003C/p>\n\u003C/blockquote>\n\u003Cp>Running in the foreground is not really that helpful if we want to run weechat on a server, so we need to detach (let it run in the background) from the container with the \u003Ccode>-d\u003C/code> or \u003Ccode>--detach\u003C/code> flag. It also helps to specify a name for the container with the \u003Ccode>--name &#x3C;name>\u003C/code> argument, so we can quickly find the container again later. The docker command now looks like this:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">docker run -it -d --name weechat weechat/weechat\n\u003C/code>\u003C/pre>\n\u003Cp>When we run this command, we will notice that weechat is running in the background. To access it we can run \u003Ccode>docker attach weechat\u003C/code>. To detach from weechat without exiting the container, we can press \u003Ccode>CTRL-p CTRL-q\u003C/code> as described in the \u003Ca href=\"https://docs.docker.com/engine/reference/commandline/attach/#description\" rel=\"nofollow noopener noreferrer\">docker attach reference\u003C/a>\u003C/p>\n\u003Cp>I noticed that there are two versions of the weechat image: a debian version and an alpine linux version. Generally the Alpine Linux versions of containers are smaller than the Debian versions, so I decided to use the alpine version: \u003Ccode>weechat/weechat:latest-alpine\u003C/code>.\u003C/p>\n\u003Cp>With this we are practically done, but if we ever remove and restart the container, all of the chat logs and customisations to weechat will be gone. To prevent this we need to add the config and log files to a volume.\u003C/p>\n\u003Cp>I generally use the folder \u003Ccode>~/docker/(service)\u003C/code> to point my docker volumes to, so I have a convenient place to inspect, modify and back up the data.\u003C/p>\n\u003Cp>Let's create the folder and add the volume to the docker container. I also added the \u003Ccode>--restart unless-stopped\u003C/code> flag to make sure the container gets restarted if it either exits for some reason of if docker restarts.\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">mkdir -p ~/docker/weechat/data\nmkdir -p ~/docker/weechat/config\n\ndocker run -it -d --restart unless-stopped \\\n    -v \"~/docker/weechat/data:/home/user/.weechat\" \\\n    -v \"~/docker/weechat/config:/home/user/.config/weechat\" \\\n    --name weechat weechat/weechat:latest-alpine`\n\u003C/code>\u003C/pre>\n\u003Cp>Running this command on the server is all we need to have weechat running in docker.\u003C/p>\n\u003Cblockquote>\n\u003Cp>But how do I quickly connect to weechat? Do I always have to first ssh into the server and then run docker attach?\u003C/p>\n\u003C/blockquote>\n\u003Cp>Yes but, as almost always, we can simplify this with a bash script:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-bash\">#!/usr/bin/env bash\n\nHOST=&#x3C;ssh host>\nssh -t \"${HOST}\" docker attach weechat\n\u003C/code>\u003C/pre>\n\u003Cp>This bash script starts ssh with the \u003Ccode>-t\u003C/code> flag which tells ssh that the command is interactive.\nCopy this script into your \u003Ccode>~/.local/bin\u003C/code> folder and make it executable.\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">nano ~/.local/bin/weechat.sh\nchmod +x weechat.sh\n\u003C/code>\u003C/pre>\n\u003Cp>And that's it! Running \u003Ccode>weechat.sh\u003C/code> will open an ssh session to your server and attach to the weechat container. Happy Chatting!\u003C/p>\n\u003Cp>If you liked this post, consider subscribing to my blog via \u003Ca href=\"https://tiim.ch/blog/rss.xml\" rel=\"nofollow noopener noreferrer\">RSS\u003C/a>, or on \u003Ca href=\"https://tiim.ch/follow\" rel=\"nofollow noopener noreferrer\">social media\u003C/a>. If you have any questions, feel free to \u003Ca href=\"https://tiim.ch/contact\" rel=\"nofollow noopener noreferrer\">contact me\u003C/a>. I also usually hang out in \u003Ca href=\"irc://irc.libera.chat/##tiim\">\u003Ccode>##tiim\u003C/code> on irc.libera.chat\u003C/a>. My name on IRC is \u003Ccode>tiim\u003C/code>.\u003C/p>\n\u003Cblockquote class=\"callout callout-info\">\n\u003Cspan class=\"callout-title\">\u003Cspan class=\"callout-icon\">\u003Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\u003Cpath d=\"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\">\u003C/path>\u003C/svg>\u003C/span>Update 2022-01-18\u003C/span>\u003Cp>I have found that at the beginning of a session, the input to weechat doesn't seem to work. Sometimes weechat refuses to let me type anything and/or doesn't recognize mouse events.\nAfter a while of spamming keys and \u003Ccode>Alt-m\u003C/code> (toggle mouse mode), it seems to fix itself most of the time.\nI have no idea if thats a problem with weechat, with docker or with ssh, and so far have not found a solution for this. If you have the same problem or even know how to fix it, feel free to reach out.\u003C/p>\n\u003C/blockquote>",slug:"blog/2023-01-15-weechat-docker",uuid:"889ff4db-3ccb-4ab1-9676-a2b0ea8f19eb",date:new Date(1673740800000),created:new Date(1673741827000),aliases:[null],title:"Running the WeeChat IRC Client on a VPS in Docker",published:true,modified:new Date(1674041667000),description:"Walkthrough on how to setup the WeeChat IRC client in docker.",cover_image:"https://media.tiim.ch/a28c65a1-ed95-43d3-af87-a2ad222bee7f.jpg",cover_image_txt:"Stable Diffusion - anime landscape, pastel colors, thick outlines, forest, mountains, golden light",content_tags:["irc","weechat","docker"],abstract:"\u003Cp>I have recently gotten interested in IRC for some reason and have been looking for a client that I like. I have used \u003Ca href=\"https://hexchat.github.io/\">HexChat\u003C/a> in the past, but I don't really fancy having yet another communications program running on my PC next to discord, zoom, telegram and thunderbird. I have been trying to use the IRC feature of thunderbird, but even though it works, it feels very much like an afterthought.\u003C/p>",tags:["docker","irc","weechat"],links:void 0,type:"article",folder:"blog",comments:[{id:"52b7b3e6-e233-4379-8f0c-3332aed562a6",type:"webmention",replyTo:"",timestamp:"2023-03-28T10:10:56Z",page:"blog/2023-01-15-weechat-docker",url:"https://tiim.ch/blog/2023-03-28-weechat-notification-ntfy",content:"Using the weechat trigger plugin to notify yourself about new private messages and mentions through the ntfy.sh notification service.",name:"Tim Bachmann"},{id:"f6f58ebf-a68f-415e-baed-cb8bf38189fd",type:"webmention",replyTo:"",timestamp:"2023-03-02T00:05:49Z",page:"blog/2023-01-15-weechat-docker",url:"https://brid.gy/like/twitter/tiimb/1614403118258601987/1557313575072546816",content:"",name:"DM Cyber Security"},{id:"45d40e9f-6498-4432-bdb0-01210e55d092",type:"webmention",replyTo:"",timestamp:"2023-01-25T18:20:43Z",page:"blog/2023-01-15-weechat-docker",url:"https://brid.gy/like/twitter/tiimb/1614403118258601987/8717982",content:"",name:"Christopher Scott"},{id:"979c42d0-a8fc-4a52-a85d-bedb672fb144",type:"webmention",replyTo:"",timestamp:"2023-01-25T09:22:51Z",page:"blog/2023-01-15-weechat-docker",url:"https://brid.gy/repost/twitter/tiimb/1614403118258601987/1618133427139792898",content:"New blog post: A walkthrough on how to set up the WeeChat IRC client in docker. #irc #docker @WeeChatClient\ntiim.ch/blog/2023-01-1â¦",name:"WeeChat"}],latestComment:"2024-01-20T09:36:14Z"},about:{html:"\u003Cp>Hi, my name is \u003Cspan class=\"p-name\">Tim Bachmann\u003C/span>!\nI'm a \u003Cspan class=\"p-role\">master graduate in computer science\u003C/span> at \u003Cspan class=\"p-org\">University of Basel\u003C/span>, swimmer and swim coach.\u003C/p>\n\u003Cp>I am passionate about all things web development, swimming, personal knowledge management and much more.\nIf you liked this or any of my posts, feel free to \u003Ca href=\"https://tiim.ch/follow\" rel=\"nofollow noopener noreferrer\">follow me\u003C/a>.\u003C/p>",slug:"about",uuid:"d8e56802-2847-4053-b213-9b004f1b965c",date:new Date(1665792000000),created:new Date(1665863229652),published:true,abstract:"\u003Cp>Hi, my name is {{name}}!\nI'm a {{role}} at {{org}}, swimmer and swim coach.\u003C/p>",tags:[],links:void 0,type:"article",cover_image:void 0,description:"",folder:"metadata"}},"uses":{"params":["slug"]}}];

					Promise.all([
						import("../_app/immutable/entry/start.5c58580c.js"),
						import("../_app/immutable/entry/app.8dd63c07.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
