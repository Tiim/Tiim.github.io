<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/swim-emoji.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="tiim.ch Â» Tim Bachmann"
      href="/blog/rss.xml"
    />
    <link href="https://comments.tiim.ch/wm/webmentions" rel="webmention" />
    <link
      href="https://comments.tiim.ch/indieauth/metadata"
      rel="indieauth-metadata"
    />
    <link
      href="https://comments.tiim.ch/indieauth/authorize"
      rel="authorization_endpoint"
    />
    <link
      href="https://comments.tiim.ch/indieauth/token"
      rel="token_endpoint"
    />
    <link rel="micropub" href="https://comments.tiim.ch/micropub" />
    <link rel="microsub" href="https://aperture.p3k.io/microsub/801" />
    <title>Tim Bachmann</title>
    
		<link href="../_app/immutable/assets/0.8d503a92.css" rel="stylesheet">
		<link href="../_app/immutable/assets/4.32b0d823.css" rel="stylesheet">
		<link href="../_app/immutable/assets/MarkdownSite.52351ed7.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.5c58580c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.8c1dbec0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.195a5806.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/paths.ee001647.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.8dd63c07.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.9334d053.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/mf2.47734ed4.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.657d6c5d.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/MarkdownSite.88130736.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/fa.9f83fec8.js"><title>First Go Project: A Jam-stack Commenting API - Tim Bachmann</title><!-- HEAD_svelte-1ula76m_START --><meta property="og:title" content="First Go Project: A Jam-stack Commenting API"><meta property="og:type" content="article"><meta property="og:description" content="I built my first project using the Go programming language: A commenting API for the jam-stack. It is simple but easily extensible. And it powers the commenting feature of this website!"><meta property="article:published_time" content="Tue Jul 12 2022 00:00:00 GMT+0000 (Coordinated Universal Time)"><meta property="article:modified_time" content="Wed Nov 23 2022 21:42:29 GMT+0000 (Coordinated Universal Time)"><meta property="article:author" content="Tim Bachmann"><meta property="article:tag" content="go"><meta property="article:tag" content="indiego"><meta property="article:tag" content="project"><meta property="article:tag" content="tiim.ch"><meta property="article:tag" content="web-api"><meta property="og:image" content="/assets/2022-07-first-go-project-commenting-api.png"><!-- HEAD_svelte-1ula76m_END -->
  </head>
  <body>
    <div id="svelte">


<div id="app"><nav class="navbar svelte-1qkwc1i" aria-label="main navigation"><div class="navbar-brand svelte-1qkwc1i"><a class="navbar-item svelte-1qkwc1i" href="/">Tim Bachmann</a></div>
  <div class="navbar-menu desktop svelte-1qkwc1i"><a href="/" class="navbar-item svelte-1qkwc1i">Home</a>
    <a href="/projects" class="navbar-item svelte-1qkwc1i">Projects</a>
    <a href="/blog" class="navbar-item svelte-1qkwc1i">Blog</a>
    <a href="/pages/uses" class="navbar-item svelte-1qkwc1i">Uses</a>
    <a class="navbar-item svelte-1qkwc1i" href="/contact">Contact</a>
    <a class="navbar-item svelte-1qkwc1i" href="/follow">Follow</a></div>
  <div class="navbar-menu mobile svelte-1qkwc1i"><div><input id="header-toggle" class="header-checkbox svelte-1qkwc1i" type="checkbox">
      <label for="header-toggle" class="toggle svelte-1qkwc1i"><span class="svelte-1qkwc1i"></span>
        <span class="svelte-1qkwc1i"></span>
        <span class="svelte-1qkwc1i"></span></label></div>
    </div>
</nav>
  <div class="section">

<div><article class="container h-entry"><figure class="svelte-1vgyhou"><img alt="First Go Project: A Jam-stack Commenting API" src="/assets/2022-07-first-go-project-commenting-api.png" class="svelte-1vgyhou">
        </figure>

    <h1><span class="p-name">First Go Project: A Jam-stack Commenting API</span></h1>
    

    <p class="tags"><a class="tag p-category" href="/tags/go">go
        </a><a class="tag p-category" href="/tags/indiego">indiego
        </a><a class="tag p-category" href="/tags/project">project
        </a><a class="tag p-category" href="/tags/tiim.ch">tiim.ch
        </a><a class="tag p-category" href="/tags/web-api">web-api
        </a></p>

    <div class="by svelte-1vgyhou"><address class="author svelte-1vgyhou">by <a href="/" rel="author">Tim Bachmann</a></address>
      <span>published on <time pubdate datetime="2022-07-12T00:00:00.000Z" class="date dt-published">Tuesday, July 12, 2022</time></span>
last updated on <time pubdate datetime="2022-11-23T21:42:29.000Z" class="date dt-updated">Wednesday, November 23, 2022</time></div>

    
    <div class="e-content content svelte-1vgyhou"><!-- HTML_TAG_START --><p>I recently have been looking around for a simple commenting system to integrate into my website. Since my website is a pre-rendered static Html site hosted on <a href="https://pages.github.com" rel="nofollow noopener noreferrer">Github Pages</a>, there is no way for it to directly store comments because it does not have a database. The only option for dynamic content to be stored is with an external service.</p>
<p>I kept my eyes open for a service that I liked, but I did not want to just integrate any old service into my website, I did have some requirements:</p>
<ul>
<li>The service should not cost anything. I would rather host something myself than sign up for another subscription (because I'm already paying for a VPS anyway).</li>
<li>I want to control how the comments on my website are displayed. I quite like my website design and I don't want a generic comment box below my posts.</li>
<li>The service should respect the privacy of the people using my website.</li>
<li>There should be an option to comment without setting up an account with the service.</li>
</ul>
<p>While looking around for how other people integrated comments into their static websites, I found a nice <a href="https://averagelinuxuser.com/static-website-commenting/" rel="nofollow noopener noreferrer">blog post from Average Linux User</a> which compares a few popular commenting systems.
Unfortunately, most systems either are not very privacy-friendly, cost money or store the comments as comments on Github issues..?
After looking through the options I decided to use this opportunity to write my own commenting system and dabble with the Go programming language.</p>
<h2>Writing a commenting API in Go</h2>
<p>First thing first, if you want to take a look at the code, check out the <a href="https://github.com/Tiim/IndieGo" rel="nofollow noopener noreferrer">Github repo</a>.</p>
<p>I decided to write the commenting system in Go because I have been looking for an excuse to practice Go for a while, and this seemed like the perfect fit. It is a small CRUD app, consisting of a storage component, an API component and a small event component in the middle to easily compose the functionality I want.</p>
<p>Currently, it supports the following functionality:</p>
<ul>
<li>Listing all comments (optionally since a specified timestamp)</li>
<li>Listing all comments for a specified page (optionally since a specified timestamp)</li>
<li>Posting comments through the API</li>
<li>A simple admin dashboard that lists all comments and allows the admin to delete them</li>
<li>Email notifications when someone comments</li>
<li>Email notifications when someone replies to your comment</li>
<li>SQLite storage for comments</li>
</ul>
<p>The code is built in a way to make it easy to customise the features.
For example to disable features like the email reply notifications you can just <a href="https://github.com/Tiim/IndieGo/blob/master/main.go#L52" rel="nofollow noopener noreferrer">comment out the line in the main.go</a> file that registers that hook.</p>
<p>To write custom hooks that get executed when a new comment gets submitted or one gets deleted, just implement the <a href="https://github.com/Tiim/IndieGo/blob/master/event/handler.go" rel="nofollow noopener noreferrer">Handler</a> interface and register it in the main method.</p>
<p>You can also easily add other storage options like databases or file storage by implementing the <a href="https://github.com/Tiim/IndieGo/blob/master/model/store.go" rel="nofollow noopener noreferrer">Store and SubscribtionStore</a> interfaces.</p>
<h2>Can it be used in production? ðŸš—ðŸ’¨</h2>
<p>I currently use it on this website! Go test it out (I might delete the comments if they are rude though ðŸ¤”).</p>
<p>In all seriousness, I would not use it for a website where the comments are critical. But for a personal blog or similar, I don't see why not.</p>
<p>If you want to host your own version, there is a Dockerfile available. If you decide to integrate this into your website, please comment below, ping me <a href="https://twitter.com/TiimB" rel="nofollow noopener noreferrer">@TiimB</a> or shoot me an email <a href="mailto:hey@tiim.ch">hey@tiim.ch</a>, I would love to check it out.</p><!-- HTML_TAG_END --></div>

    

    <div class="outro svelte-1ysgxol" slot="outro"><em>You found an error in this post? Open a
      <a href="https://github.com/Tiim/Tiim.github.io/tree/source/content/blog/2022-07-12-first-go-project-commenting-api.md">pull request</a>.
    </em></div>

    <div class="author-info p-author h-card svelte-gqjfyc"><div class="author-avatar svelte-gqjfyc"><img src="https://media.tiim.ch/tiim.jpg" alt="Photo of Tim Bachmann" class="u-photo svelte-gqjfyc"></div>
  <div><p class="author-bio p-note"><!-- HTML_TAG_START --><p>Hi, my name is <span class="p-name">Tim Bachmann</span>!
I'm a <span class="p-role">master graduate in computer science</span> at <span class="p-org">University of Basel</span>, swimmer and swim coach.</p>
<p>I am passionate about all things web development, swimming, personal knowledge management and much more.
If you liked this or any of my posts, feel free to <a href="https://tiim.ch/follow" rel="nofollow noopener noreferrer">follow me</a>.</p><!-- HTML_TAG_END --></p>
    <div class="author-detail svelte-gqjfyc"><span class="hidden p-gender-identity svelte-gqjfyc">male</span>
      <a href="mailto:hey@tiim.ch" class="p-email">hey@tiim.ch</a>
      <a class="p-url" href="https://tiim.ch/">https://tiim.ch/</a></div></div>
</div>

    <div class="post-details"><p class="hidden p-summary svelte-1vgyhou">I built my first project using the Go programming language: A commenting API for the jam-stack. It is simple but easily extensible. And it powers the commenting feature of this website!</p>
      <a class="hidden p-url p-uid svelte-1vgyhou" href="/blog/2022-07-12-first-go-project-commenting-api">/blog/2022-07-12-first-go-project-commenting-api</a></div></article>
  <div class="container"><h2 class="svelte-z0478z">11 Comments and Interactions</h2>
<span>Leave a comment or interact with this page via
  <a href="http://indieweb.org/webmention">WebMention </a></span>
<div class="comment-form-wrap"><div id="comment-section" class="comment-input svelte-1xby3i5"><span class="avatar svelte-1xby3i5">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
    <div class="comment-input-content svelte-1xby3i5"><label for="comment-input-name">Name</label>
      <input id="commentName" type="text" placeholder="Name">
      <div class="comment-input-content svelte-1xby3i5"><label for="comment-input-email">E-mail</label>
        <div class="horizontal svelte-1xby3i5"><input id="commentEmail" type="email" placeholder="Email (optional)">
          <div class="checkbox svelte-1xby3i5"><input type="checkbox" id="comment-input-notify" class="svelte-1xby3i5">
            <label for="comment-input-notify">Notify me on replies</label></div></div></div>
      
      <label for="commentContent">Comment</label>
      <textarea id="commentContent" placeholder="Comment" class="svelte-1xby3i5"></textarea>
      <button>Post</button>
      </div></div>
</div>
<ul class="comment-list svelte-z0478z"><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="31ec5f44-15b2-498a-890d-350e38b9a83e" class="svelte-z0478z">Tim Bachmann</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/projects/indiego">2023-08-02 9:10:04 AM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z">I blogged about creating a comment system for my website a while ago,
and later how I implemented webmentions into that same project.
Since then this little go program has grown quite a bit, and it has turned into a modular platform
that supports quite a few technologies:...</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="6d792d24-ba58-4408-83a4-3583667ff4ad" class="svelte-z0478z">Anonymous</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#6d792d24-ba58-4408-83a4-3583667ff4ad">2023-07-09 7:25:02 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">Heya just saw your post on Reddit about this comment feature, didn't want to leave without using it ^^. Nicely done!</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="99dd9ccf-5349-4f41-9553-67986e1a1074" class="svelte-z0478z">Tiim</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#99dd9ccf-5349-4f41-9553-67986e1a1074">2022-12-07 11:01:37 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        <span class="reply-notice svelte-z0478z">In reply to
            <a href="#1c8ba0da-10df-4a7a-b067-55875441de2d">undefined</a>
          </span>
        <p class="comment-content svelte-z0478z">You are right, there is not any documentation in the readme yet. Although hopefully, I will work on that soon. I'm in the middle of refactoring the project.

To query the comments there are two rest endpoints ["/comment"](https://github.com/Tiim/IndieGo/blob/044b58e96dae112ceaca509f8541c84db3ef50f3/api/comment.go#L41-L71) and ["/comment/:page"](https://github.com/Tiim/IndieGo/blob/044b58e96dae112ceaca509f8541c84db3ef50f3/api/comment.go#L73-L107) which return all comments or the comments for a specific page. The comments are loaded from this API endpoint when the site is generated.

To display the comments without rebuilding the site, new comments are fetched in the browser with the "?since=&lt;time-of-last-build>" query parameter.</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="1c8ba0da-10df-4a7a-b067-55875441de2d" class="svelte-z0478z">Poorchop</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#1c8ba0da-10df-4a7a-b067-55875441de2d">2022-12-07 10:33:44 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">Good stuff. Always nice to see a site supporting comments and/or Webmentions. Maybe I missed it in the readme but I am curious as to how one queries the API for comments. Do you pull in the comments from the database when you generate the site?</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="e42756e4-d5a5-4727-8c58-434d285b7ab3" class="svelte-z0478z">Golang Bot</h3>
          <span class="time svelte-z0478z"><a href="https://brid.gy/repost/twitter/tiimb/1546801590593638400/1546801615264415745">2022-11-27 10:31:58 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z">I published a new blog post:
First Go Project: A jam-stack Commenting API
tiim.ch/blog/2022-07-1â€¦
#golang #jamstack #API</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="b8d3ae8b-0059-4379-8c35-30c97269908f" class="svelte-z0478z">Tim Bachmann</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-12-indiewebifying-my-website-part-1">2022-11-21 10:19:23 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"><p class="comment-text">Mentioned this post</p></span>
          </div>
        
        <p class="comment-content svelte-z0478z">This site now supports sending and receiving webmentions and surfacing structured data using microformats2.</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="171e3444-f1d0-492d-8bc7-c0a133a41783" class="svelte-z0478z">hola</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#171e3444-f1d0-492d-8bc7-c0a133a41783">2022-07-18 8:44:11 AM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">hola</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="5875bba1-e69b-467a-bab5-23ef4160d257" class="svelte-z0478z">polite</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#5875bba1-e69b-467a-bab5-23ef4160d257">2022-07-13 9:06:11 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        <span class="reply-notice svelte-z0478z">In reply to
            <a href="#621574fd-eea2-48d6-87c8-aebd0f05f1aa">undefined</a>
          </span>
        <p class="comment-content svelte-z0478z">And a polite reply</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="8494c653-ef37-47a2-ae1b-00d00e4815a9" class="svelte-z0478z">somGuy</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#8494c653-ef37-47a2-ae1b-00d00e4815a9">2022-07-13 6:31:31 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">Pretty cool dudez</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="621574fd-eea2-48d6-87c8-aebd0f05f1aa" class="svelte-z0478z">rude</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#621574fd-eea2-48d6-87c8-aebd0f05f1aa">2022-07-12 9:40:39 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">This is a rude comment ;)</p></div>
    </li><li class="comment svelte-z0478z"><span class="avatar svelte-z0478z">
<!-- HTML_TAG_START --><!-- HTML_TAG_END --></span>
      <div class="comment-card svelte-z0478z"><div class="comment-header svelte-z0478z"><h3 id="fb6278ae-e48c-4397-ba29-bec4e5cb3a57" class="svelte-z0478z">wdup</h3>
          <span class="time svelte-z0478z"><a href="https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#fb6278ae-e48c-4397-ba29-bec4e5cb3a57">2022-07-12 1:30:14 PM
            </a></span>
          <span class="reply-notice svelte-z0478z"></span>
          <span><button class="svelte-z0478z">Reply</button>
            </span></div>
        
        <p class="comment-content svelte-z0478z">Good job dude!</p></div>
    </li>
</ul></div>
</div></div>
  <div><footer class="svelte-18j7aqw"><div><!-- HTML_TAG_START --><p>Built with SvelteKit and hosted on GitHub Pages.</p>
<p>View this website on <a href="https://github.com/Tiim/Tiim.github.io" rel="nofollow noopener noreferrer">GitHub</a>!</p>
<h2>Other pages</h2>
<ul>
<li><a href="https://tiim.ch/pages/links" rel="nofollow noopener noreferrer">Links and Blogroll</a></li>
</ul><!-- HTML_TAG_END --></div>
  <p class="copyright svelte-18j7aqw">Â©Tim Bachmann 2024</p>
</footer></div></div>


			
			<script>
				{
					__sveltekit_h39q7n = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{footer:{html:"\u003Cp>Built with SvelteKit and hosted on GitHub Pages.\u003C/p>\n\u003Cp>View this website on \u003Ca href=\"https://github.com/Tiim/Tiim.github.io\" rel=\"nofollow noopener noreferrer\">GitHub\u003C/a>!\u003C/p>\n\u003Ch2>Other pages\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://tiim.ch/pages/links\" rel=\"nofollow noopener noreferrer\">Links and Blogroll\u003C/a>\u003C/li>\n\u003C/ul>",slug:"footer",uuid:"e556fd14-3acd-4a7b-9b31-929fdd6d2b7a",created:new Date(1690834579000),date:new Date(1690834579000),published:true,abstract:"\u003Cp>Built with SvelteKit and hosted on GitHub Pages.\u003C/p>",tags:[],links:void 0,type:"article",cover_image:void 0,description:"",folder:"metadata"}},"uses":{}},{"type":"data","data":{post:{html:"\u003Cp>I recently have been looking around for a simple commenting system to integrate into my website. Since my website is a pre-rendered static Html site hosted on \u003Ca href=\"https://pages.github.com\" rel=\"nofollow noopener noreferrer\">Github Pages\u003C/a>, there is no way for it to directly store comments because it does not have a database. The only option for dynamic content to be stored is with an external service.\u003C/p>\n\u003Cp>I kept my eyes open for a service that I liked, but I did not want to just integrate any old service into my website, I did have some requirements:\u003C/p>\n\u003Cul>\n\u003Cli>The service should not cost anything. I would rather host something myself than sign up for another subscription (because I'm already paying for a VPS anyway).\u003C/li>\n\u003Cli>I want to control how the comments on my website are displayed. I quite like my website design and I don't want a generic comment box below my posts.\u003C/li>\n\u003Cli>The service should respect the privacy of the people using my website.\u003C/li>\n\u003Cli>There should be an option to comment without setting up an account with the service.\u003C/li>\n\u003C/ul>\n\u003Cp>While looking around for how other people integrated comments into their static websites, I found a nice \u003Ca href=\"https://averagelinuxuser.com/static-website-commenting/\" rel=\"nofollow noopener noreferrer\">blog post from Average Linux User\u003C/a> which compares a few popular commenting systems.\nUnfortunately, most systems either are not very privacy-friendly, cost money or store the comments as comments on Github issues..?\nAfter looking through the options I decided to use this opportunity to write my own commenting system and dabble with the Go programming language.\u003C/p>\n\u003Ch2>Writing a commenting API in Go\u003C/h2>\n\u003Cp>First thing first, if you want to take a look at the code, check out the \u003Ca href=\"https://github.com/Tiim/IndieGo\" rel=\"nofollow noopener noreferrer\">Github repo\u003C/a>.\u003C/p>\n\u003Cp>I decided to write the commenting system in Go because I have been looking for an excuse to practice Go for a while, and this seemed like the perfect fit. It is a small CRUD app, consisting of a storage component, an API component and a small event component in the middle to easily compose the functionality I want.\u003C/p>\n\u003Cp>Currently, it supports the following functionality:\u003C/p>\n\u003Cul>\n\u003Cli>Listing all comments (optionally since a specified timestamp)\u003C/li>\n\u003Cli>Listing all comments for a specified page (optionally since a specified timestamp)\u003C/li>\n\u003Cli>Posting comments through the API\u003C/li>\n\u003Cli>A simple admin dashboard that lists all comments and allows the admin to delete them\u003C/li>\n\u003Cli>Email notifications when someone comments\u003C/li>\n\u003Cli>Email notifications when someone replies to your comment\u003C/li>\n\u003Cli>SQLite storage for comments\u003C/li>\n\u003C/ul>\n\u003Cp>The code is built in a way to make it easy to customise the features.\nFor example to disable features like the email reply notifications you can just \u003Ca href=\"https://github.com/Tiim/IndieGo/blob/master/main.go#L52\" rel=\"nofollow noopener noreferrer\">comment out the line in the main.go\u003C/a> file that registers that hook.\u003C/p>\n\u003Cp>To write custom hooks that get executed when a new comment gets submitted or one gets deleted, just implement the \u003Ca href=\"https://github.com/Tiim/IndieGo/blob/master/event/handler.go\" rel=\"nofollow noopener noreferrer\">Handler\u003C/a> interface and register it in the main method.\u003C/p>\n\u003Cp>You can also easily add other storage options like databases or file storage by implementing the \u003Ca href=\"https://github.com/Tiim/IndieGo/blob/master/model/store.go\" rel=\"nofollow noopener noreferrer\">Store and SubscribtionStore\u003C/a> interfaces.\u003C/p>\n\u003Ch2>Can it be used in production? ðŸš—ðŸ’¨\u003C/h2>\n\u003Cp>I currently use it on this website! Go test it out (I might delete the comments if they are rude though ðŸ¤”).\u003C/p>\n\u003Cp>In all seriousness, I would not use it for a website where the comments are critical. But for a personal blog or similar, I don't see why not.\u003C/p>\n\u003Cp>If you want to host your own version, there is a Dockerfile available. If you decide to integrate this into your website, please comment below, ping me \u003Ca href=\"https://twitter.com/TiimB\" rel=\"nofollow noopener noreferrer\">@TiimB\u003C/a> or shoot me an email \u003Ca href=\"mailto:hey@tiim.ch\">hey@tiim.ch\u003C/a>, I would love to check it out.\u003C/p>",slug:"blog/2022-07-12-first-go-project-commenting-api",uuid:"bff14052-4f3f-4dcb-bcee-155ae1c6b09e",date:new Date(1657584000000),created:new Date(1657297477766),aliases:[null],title:"First Go Project: A Jam-stack Commenting API",published:true,modified:new Date(1669239749000),description:"I built my first project using the Go programming language: A commenting API for the jam-stack. It is simple but easily extensible. And it powers the commenting feature of this website!",cover_image:"/assets/2022-07-first-go-project-commenting-api.png",content_tags:["go","web-api","project","tiim.ch","indiego"],abstract:"\u003Cp>I recently have been looking around for a simple commenting system to integrate into my website. Since my website is a pre-rendered static Html site hosted on \u003Ca href=\"https://pages.github.com\">Github Pages\u003C/a>, there is no way for it to directly store comments because it does not have a database. The only option for dynamic content to be stored is with an external service.\u003C/p>",tags:["go","indiego","project","tiim.ch","web-api"],links:void 0,type:"article",folder:"blog",comments:[{id:"31ec5f44-15b2-498a-890d-350e38b9a83e",type:"webmention",replyTo:"",timestamp:"2023-08-02T09:10:04Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/projects/indiego",content:"I blogged about creating a comment system for my website a while ago,\nand later how I implemented webmentions into that same project.\nSince then this little go program has grown quite a bit, and it has turned into a modular platform\nthat supports quite a few technologies:...",name:"Tim Bachmann"},{id:"6d792d24-ba58-4408-83a4-3583667ff4ad",type:"comment",replyTo:"",timestamp:"2023-07-09T19:25:02Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#6d792d24-ba58-4408-83a4-3583667ff4ad",content:"Heya just saw your post on Reddit about this comment feature, didn't want to leave without using it ^^. Nicely done!",name:"Anonymous"},{id:"99dd9ccf-5349-4f41-9553-67986e1a1074",type:"comment",replyTo:"1c8ba0da-10df-4a7a-b067-55875441de2d",timestamp:"2022-12-07T23:01:37Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#99dd9ccf-5349-4f41-9553-67986e1a1074",content:"You are right, there is not any documentation in the readme yet. Although hopefully, I will work on that soon. I'm in the middle of refactoring the project.\n\nTo query the comments there are two rest endpoints [\"/comment\"](https://github.com/Tiim/IndieGo/blob/044b58e96dae112ceaca509f8541c84db3ef50f3/api/comment.go#L41-L71) and [\"/comment/:page\"](https://github.com/Tiim/IndieGo/blob/044b58e96dae112ceaca509f8541c84db3ef50f3/api/comment.go#L73-L107) which return all comments or the comments for a specific page. The comments are loaded from this API endpoint when the site is generated.\n\nTo display the comments without rebuilding the site, new comments are fetched in the browser with the \"?since=\u003Ctime-of-last-build>\" query parameter.",name:"Tiim"},{id:"1c8ba0da-10df-4a7a-b067-55875441de2d",type:"comment",replyTo:"",timestamp:"2022-12-07T22:33:44Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#1c8ba0da-10df-4a7a-b067-55875441de2d",content:"Good stuff. Always nice to see a site supporting comments and/or Webmentions. Maybe I missed it in the readme but I am curious as to how one queries the API for comments. Do you pull in the comments from the database when you generate the site?",name:"Poorchop"},{id:"e42756e4-d5a5-4727-8c58-434d285b7ab3",type:"webmention",replyTo:"",timestamp:"2022-11-27T22:31:58Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://brid.gy/repost/twitter/tiimb/1546801590593638400/1546801615264415745",content:"I published a new blog post:\nFirst Go Project: A jam-stack Commenting API\ntiim.ch/blog/2022-07-1â€¦\n#golang #jamstack #API",name:"Golang Bot"},{id:"b8d3ae8b-0059-4379-8c35-30c97269908f",type:"webmention",replyTo:"",timestamp:"2022-11-21T22:19:23Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-12-indiewebifying-my-website-part-1",content:"This site now supports sending and receiving webmentions and surfacing structured data using microformats2.",name:"Tim Bachmann"},{id:"171e3444-f1d0-492d-8bc7-c0a133a41783",type:"comment",replyTo:"",timestamp:"2022-07-18T08:44:11Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#171e3444-f1d0-492d-8bc7-c0a133a41783",content:"hola",name:"hola"},{id:"5875bba1-e69b-467a-bab5-23ef4160d257",type:"comment",replyTo:"621574fd-eea2-48d6-87c8-aebd0f05f1aa",timestamp:"2022-07-13T21:06:11Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#5875bba1-e69b-467a-bab5-23ef4160d257",content:"And a polite reply",name:"polite"},{id:"8494c653-ef37-47a2-ae1b-00d00e4815a9",type:"comment",replyTo:"",timestamp:"2022-07-13T18:31:31Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#8494c653-ef37-47a2-ae1b-00d00e4815a9",content:"Pretty cool dudez",name:"somGuy"},{id:"621574fd-eea2-48d6-87c8-aebd0f05f1aa",type:"comment",replyTo:"",timestamp:"2022-07-12T21:40:39Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#621574fd-eea2-48d6-87c8-aebd0f05f1aa",content:"This is a rude comment ;)",name:"rude"},{id:"fb6278ae-e48c-4397-ba29-bec4e5cb3a57",type:"comment",replyTo:"",timestamp:"2022-07-12T13:30:14Z",page:"blog/2022-07-12-first-go-project-commenting-api",url:"https://tiim.ch/blog/2022-07-12-first-go-project-commenting-api#fb6278ae-e48c-4397-ba29-bec4e5cb3a57",content:"Good job dude!",name:"wdup"}],latestComment:"2024-01-20T09:36:14Z"},about:{html:"\u003Cp>Hi, my name is \u003Cspan class=\"p-name\">Tim Bachmann\u003C/span>!\nI'm a \u003Cspan class=\"p-role\">master graduate in computer science\u003C/span> at \u003Cspan class=\"p-org\">University of Basel\u003C/span>, swimmer and swim coach.\u003C/p>\n\u003Cp>I am passionate about all things web development, swimming, personal knowledge management and much more.\nIf you liked this or any of my posts, feel free to \u003Ca href=\"https://tiim.ch/follow\" rel=\"nofollow noopener noreferrer\">follow me\u003C/a>.\u003C/p>",slug:"about",uuid:"d8e56802-2847-4053-b213-9b004f1b965c",date:new Date(1665792000000),created:new Date(1665863229652),published:true,abstract:"\u003Cp>Hi, my name is {{name}}!\nI'm a {{role}} at {{org}}, swimmer and swim coach.\u003C/p>",tags:[],links:void 0,type:"article",cover_image:void 0,description:"",folder:"metadata"}},"uses":{"params":["slug"]}}];

					Promise.all([
						import("../_app/immutable/entry/start.5c58580c.js"),
						import("../_app/immutable/entry/app.8dd63c07.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
