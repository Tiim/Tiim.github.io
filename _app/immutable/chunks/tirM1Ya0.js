var z=Object.defineProperty;var L=t=>{throw TypeError(t)};var $=(t,e,a)=>e in t?z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var M=(t,e,a)=>$(t,typeof e!="symbol"?e+"":e,a),k=(t,e,a)=>e.has(t)||L("Cannot "+a);var s=(t,e,a)=>(k(t,e,"read from private field"),a?a.call(t):e.get(t)),v=(t,e,a)=>e.has(t)?L("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),x=(t,e,a,r)=>(k(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a);import{I as N,O as G,T as I,P as H,h as Y,B as F,j as O,q as Z,al as J,D as K,i as Q,v as V,am as W,x as X,y as ee,z as te,o as ae,m as q,an as se,ao as re,ap as ie,g as R,aq as ne,a3 as fe,Y as ce,ar as de,aj as ue,w as _e,as as he,u as oe,a0 as le,at as ve,au as be,av as ge,aw as me,ax as Se,ay as pe}from"./N6vMP6K8.js";var h,o,_,p,P,T;class Pe{constructor(e,a=!0){M(this,"anchor");v(this,h,new Map);v(this,o,new Map);v(this,_,new Map);v(this,p,!0);v(this,P,()=>{var e=N;if(s(this,h).has(e)){var a=s(this,h).get(e),r=s(this,o).get(a);if(r)G(r);else{var f=s(this,_).get(a);f&&(s(this,o).set(a,f.effect),s(this,_).delete(a),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),r=f.effect)}for(const[c,n]of s(this,h)){if(s(this,h).delete(c),c===e)break;const i=s(this,_).get(n);i&&(I(i.effect),s(this,_).delete(n))}for(const[c,n]of s(this,o)){if(c===a)continue;const i=()=>{if(Array.from(s(this,h).values()).includes(c)){var l=document.createDocumentFragment();J(n,l),l.append(Y()),s(this,_).set(c,{effect:n,fragment:l})}else I(n);s(this,o).delete(c)};s(this,p)||!r?H(n,i,!1):i()}}});v(this,T,e=>{s(this,h).delete(e);const a=Array.from(s(this,h).values());for(const[r,f]of s(this,_))a.includes(r)||(I(f.effect),s(this,_).delete(r))});this.anchor=e,x(this,p,a)}ensure(e,a){var r=N,f=K();if(a&&!s(this,o).has(e)&&!s(this,_).has(e))if(f){var c=document.createDocumentFragment(),n=Y();c.append(n),s(this,_).set(e,{effect:F(()=>a(n)),fragment:c})}else s(this,o).set(e,F(()=>a(this.anchor)));if(s(this,h).set(r,e),f){for(const[i,d]of s(this,o))i===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[i,d]of s(this,_))i===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(s(this,P)),r.ondiscard(s(this,T))}else O&&(this.anchor=Z),s(this,P).call(this)}}h=new WeakMap,o=new WeakMap,_=new WeakMap,p=new WeakMap,P=new WeakMap,T=new WeakMap;function ye(t,e,a=!1){O&&V();var r=new Pe(t),f=a?W:0;function c(n,i){if(O){const l=X(t)===ee;if(n===l){var d=te();ae(d),r.anchor=d,q(!1),r.ensure(n,i),q(!0);return}}r.ensure(n,i)}Q(()=>{var n=!1;e((i,d=!0)=>{n=!0,c(d,i)}),n||c(!1,null)},f)}let E=!1;function Ae(t){var e=E;try{return E=!1,[t(),E]}finally{E=e}}function Ie(t,e,a,r){var w;var f=!le||(a&ve)!==0,c=(a&he)!==0,n=(a&ge)!==0,i=r,d=!0,l=()=>(d&&(d=!1,i=n?oe(r):r),i),g;if(c){var C=Se in t||pe in t;g=((w=se(t,e))==null?void 0:w.set)??(C&&e in t?u=>t[e]=u:void 0)}var m,D=!1;c?[m,D]=Ae(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=l(),g&&(f&&re(),g(m)));var b;if(f?b=()=>{var u=t[e];return u===void 0?l():(d=!0,u)}:b=()=>{var u=t[e];return u!==void 0&&(i=void 0),u===void 0?i:u},f&&(a&ie)===0)return b;if(g){var U=t.$$legacy;return(function(u,A){return arguments.length>0?((!f||!A||U||D)&&g(A?b():u),u):b()})}var y=!1,S=((a&be)!==0?ue:_e)(()=>(y=!1,b()));c&&R(S);var j=ce;return(function(u,A){if(arguments.length>0){const B=A?R(S):f&&c?ne(u):u;return fe(S,B),y=!0,i!==void 0&&(i=B),u}return me&&y||(j.f&de)!==0?S.v:R(S)})}export{Pe as B,ye as i,Ie as p};
